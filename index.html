<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5">
    <title>The Autonomous Terminal - Commands of wisdom and nonsense</title>
    <meta name="keywords" content="autonomous terminal, command line, jokes, fortune">

    <script src="jquery-3.5.1.min.js"></script>
    <script src="autoterm.js"></script>
    <script>
// <![CDATA[

var autoterm = null;
var first = true;
var defaultPrompt = '$ ';

function fetchNextCmd() {
    if (!autoterm) return false;

    if (first) {
        first = false;
        autoterm.exec(
             '^S9# Autonomous terminal at my service. Stay away from keyboard, thank you.\n',
             '', 1500);
        setTimeout(fetchNextCmd, 2000);
        return true;
    }

    if (autoterm.busy) {
        setTimeout(fetchNextCmd, 2000);
        return true;
    }

    var fetchUrl = 'cmd.cgi';
    var nextPause = 3000;
    if (Math.random() < 0.35) {
        fetchUrl += '?fortune';
        nextPause = 5000; // give time to ponder
    }

    if (autoterm.lines() > 40) {
        autoterm.clear();
    }
    
    $.ajax(fetchUrl, { 
          cache: false,
          dataType: 'text',
          success: function(data) {
              autoterm.exec(data, defaultPrompt, nextPause);
              setTimeout(fetchNextCmd, 2000);
          }
        }
    );
}

$(document).ready(function() {
    autoterm = new AutoTerm($('#autoterm').get(0));
    fetchNextCmd();
});

// ]]>
    </script>
    <style>
     body { background-color: black; color: white }
     #icon { position: fixed; top: 0px; right: 0px; margin: 1em }
     .bubble { color: white; font-style: italic; }
     #content { position: absolute; top: 0; left: 0; }
    </style>
</head>

<body>
<img id="icon" src="autoterm.png" alt="Terminal emulator icon">

<!-- Page content -->
<div id="content">

<pre id="autoterm" style="color:#00fa9a; padding-left: 1em;border-style: none; font-size: 1.1em">
</pre>

<!-- Footer section -->

</div><!-- End of 'content' -->

</body>
</html>
